# Практична робота №1. Статичний розрахунок матеріального балансу шихти

## 1) Постановка задачі
Потрібно виконати статичний розрахунок матеріального балансу киснево-конвертерної плавки в розрахунку на **1000 кг металевої шихти** (рідкий чавун + сталевий брухт).

Необхідно:

- обчислити маси окиснених домішок (щонайменше $Si$, $Mn$; за наявності даних — $P$);
- визначити масу утворених оксидів $(SiO_2)$, $(MnO)$ (та, за потреби, $(P_2O_5)$);
- за заданою основністю шлаку $B = (CaO)/(SiO_2)$ визначити потрібну масу вапна;
- оцінити масу шлаку;
- оцінити втрати заліза у шлак (через $FeO$) та з пилом;
- оцінити вихід сталі (масу рідкої сталі після плавки) і вихід $\%$ від маси шихти.

### Вхідні дані (для кожного варіанта)
- $w_{scr}$ — частка брухту в металевій шихті, частка одиниці
- $[Si]_{hm}, [Mn]_{hm}, [P]_{hm}, [C]_{hm}$ — вміст домішок у чавуні, %
- $B$ — основність шлаку $CaO/SiO_2$, безрозмірна
- склад вапна: $x_{CaO}^{lime}$, $x_{SiO_2}^{lime}$, частки одиниці

### Прийняті типові параметри моделі (якщо не задані окремо)
У навчальному статичному балансі частина параметрів задається як типова (їх можна змінювати, якщо умова варіанта містить інші значення):

- склад брухту: $[Si]_{scr}$, $[Mn]_{scr}$, $[P]_{scr}$, %
- залишкові вмісти у сталі після плавки: $[Si]_{st}$, $[Mn]_{st}$, $[P]_{st}$, $[C]_{st}$, %
- склад вапна: $x_{CaO}^{lime}$, $x_{SiO_2}^{lime}$, частки одиниці
- параметри втрат і шлаку: $k_{dust}$, $w_{FeO}$, $k_{main}$, частки одиниці
- параметр газової фази: $\alpha_{CO}$ — частка вуглецю, що виходить у вигляді $CO$ (решта $1-\alpha_{CO}$ — у вигляді $CO_2$)

Базові (типові) значення, які використовуються в цій роботі:

- $[Si]_{scr}=0.25\%$, $[Mn]_{scr}=0.40\%$, $[P]_{scr}=0.02\%$, $[C]_{scr}=0.20\%$
- $[Si]_{st}=0.005\%$, $[Mn]_{st}=0.10\%$, $[P]_{st}=0.015\%$, $[C]_{st}=0.10\%$
- $x_{CaO}^{lime}=0.90$, $x_{SiO_2}^{lime}=0.02$
- $k_{dust}=0.015$, $w_{FeO}=0.15$, $k_{main}=0.80$
- $\alpha_{CO}=0.90$

### Потрібно визначити
- $m_{hm}, m_{scr}$, кг — маси чавуну та брухту в металевій шихті
- $\Delta m_{Si}, \Delta m_{Mn}$ (за наявності — $\Delta m_P$), кг — маси елементів, що окиснились під час продувки (різниця «було в шихті» мінус «залишилось у сталі»)
- $m_{SiO_2}, m_{MnO}$ (за наявності — $m_{P_2O_5}$), кг — маси оксидів, які утворились у шлаку внаслідок окиснення домішок
- $m_{lime}$, кг — маса вапна, потрібна для забезпечення заданої основності $B = CaO/SiO_2$
- $m_{slag}$, кг — маса шлаку (оцінка за спрощеною моделлю)
- $m_{steel}$, кг — маса рідкої сталі після плавки (оцінка з урахуванням втрат Fe у шлак та з пилом)
- $Yield$, % — вихід сталі відносно маси металевої шихти

---

## 2) Теоретичні пояснення та обґрунтування для курсу
Матеріальний баланс є базою для теплового балансу: без коректних мас $SiO_2$, $MnO$, $FeO$, шлаку, газів і сталі неможливо коректно оцінити:

- прихід тепла від окиснення домішок;
- витрати тепла на нагрів і плавлення продуктів;
- втрати тепла з шлаком і газами.

У статичному балансі ми не моделюємо кінетику процесу в часі, а оцінюємо **підсумковий результат** плавки за прийнятими припущеннями.

### Фізичний зміст матеріального балансу шихти
Матеріальний баланс відповідає на питання: **куди переходить маса домішок і флюсів під час продувки** та **скільки металу реально залишиться у вигляді сталі**.

Ключова ідея:

- домішки $Si$, $Mn$ (та частково $P$) при окисненні переходять з металу в шлак у вигляді оксидів ($SiO_2$, $MnO$, $P_2O_5$);
- для отримання шлаку заданої основності потрібна певна маса вапна, а це суттєво впливає на масу шлаку;
- частина заліза втрачається зі шлаком у вигляді $FeO$ і з пилом/виносами, що прямо знижує вихід сталі.

### Чому в розрахунку з'являється основність $B = CaO/SiO_2$
Основність характеризує «лужність» шлаку. У навчальному курсі це важливо, бо саме через $B$ ми задаємо вимогу до якості шлаку (його здатність:

- зв'язувати $SiO_2$ і забезпечувати потрібні властивості;
- створювати умови для рафінування (наприклад, по фосфору);
- впливати на окиснювальність шлаку та втрати заліза).

Тому в задачі ми не просто рахуємо, скільки $SiO_2$ утвориться, а й **підбираємо витрату вапна**, щоб отримати задане $B$.

### Узгодженість одиниць і переходи
Щоб не отримати помилок на порядок величини, у роботі фіксуємо правила:

- усі маси в розрахунках задаємо в **кг**;
- вмісти елементів у вихідних даних подаються в **%**, але у формулах використовуються як **частка** (тобто ділимо на 100);
- $B$ є **безрозмірною** величиною;
- масові частки компонентів вапна ($x_{CaO}^{lime}$, $x_{SiO_2}^{lime}$) задаються як **частка одиниці** (наприклад, 0.90).

### Про прийняті припущення (і навіщо вони потрібні)
Ця робота є **навчальною статичною моделлю**, тому деякі параметри приймаються типовими:

- склад брухту;
- залишкові вмісти $[i]_{st}$ у сталі;
- частка $FeO$ у шлаку $w_{FeO}$;
- частка втрат з пилом $k_{dust}$;
- частка вуглецю, що виходить у вигляді $CO$ ($\alpha_{CO}$).

Сенс цих припущень:

- показати механіку розрахунку та причинно-наслідкові зв'язки;
- зробити задачу розв'язуваною без надлишку довідкових таблиць;
- підготувати вхідні дані для наступних робіт з теплового балансу.

У промислових розрахунках ці параметри задаються за даними цеху/нормативами; у курсі — вони є частиною умов задачі.

### Прийняті припущення (для навчального розрахунку)
1. Розрахунок ведемо на базі $m_{charge}=1000\ \text{кг}$ (металева шихта).
2. Склад брухту приймаємо типовим (можна змінювати, якщо задано окремо):

- $[Si]_{scr}=0.25\%$
- $[Mn]_{scr}=0.40\%$
- $[P]_{scr}=0.02\%$
- $[C]_{scr}=0.20\%$

3. Вміст домішок у сталі після плавки (залишок у металі) приймаємо типовим для оцінки (можна уточнювати під марку сталі):

- $[Si]_{st}=0.005\%$ (практично весь Si окиснюється)
- $[Mn]_{st}=0.10\%$
- $[P]_{st}=0.015\%$
- $[C]_{st}=0.10\%$

4. Втрати заліза з пилом і виносами задаємо як частку від маси шихти:

- $m_{dust}=k_{dust}\cdot m_{charge}$, де $k_{dust}=0.015$ (1.5%)

де:

- $m_{dust}$ — втрати металу з пилом/виносами (навчальна оцінка), кг
- $k_{dust}$ — частка втрат з пилом від маси шихти, частка одиниці
- $m_{charge}$ — маса металевої шихти (база розрахунку), кг

5. Вміст $FeO$ у шлаку задаємо як частку маси шлаку:

- $m_{FeO} = w_{FeO}\cdot m_{slag}$, де $w_{FeO}=0.15$ (15%)

де:

- $m_{FeO}$ — маса $FeO$ у шлаку, кг
- $w_{FeO}$ — масова частка $FeO$ у шлаку, частка одиниці
- $m_{slag}$ — маса шлаку, кг

6. Частка вуглецю, що виходить у вигляді $CO$:

- $\alpha_{CO}=0.90$ (90%)

Додатково про шлак у цій роботі: масу шлаку оцінюємо через параметр $k_{main}$ як частку суми основних оксидів $(CaO+SiO_2+MnO+P_2O_5)$ у загальній масі шлаку. Це означає, що інші компоненти (наприклад, $Al_2O_3$, $MgO$, залишковий $FeO$, дрібні домішки та шлакоутворювальні добавки) в цій моделі враховуються **узагальнено** в «решті» $1-k_{main}$. Важливо, що числове значення $k_{main}$ залежить від того, які саме компоненти вважати «основними» і які оксиди явно включені в суму. У промислових розрахунках масу шлаку зазвичай визначають покомпонентно (через сумування внесків оксидів), а в навчальній задачі застосовується узагальнений параметр $k_{main}$ для спрощення.

Параметр $w_{FeO}$ використовується окремо як навчальна оцінка втрат заліза через $FeO$ і не є «жорсткою» умовою для визначення $m_{slag}$ у межах цієї спрощеної моделі. У промисловості $w_{FeO}$ є результатом режиму продувки та кінцевого стану ванни; у статичній навчальній моделі він задається як параметр, щоб явно показати, як окиснювальність шлаку впливає на втрати $Fe$ та вихід сталі.

Так само $k_{dust}$ та $\alpha_{CO}$ є параметрами моделі: вони дозволяють урахувати неметалеві втрати та газову фазу без моделювання кінетики процесу. Прийняті залишкові вмісти $[i]_{st}$ задають цільові рівні рафінування (кінцевий склад), а ітераційне уточнення $m_{steel}$ потрібне лише для самузгодження «залишку в сталі» з кінцевою масою металу. Критерій зупинки (наприклад, $\varepsilon=0.1\ \text{кг}$) гарантує керованість і прозорість процедури.

У промислових розрахунках ці параметри задаються за даними цеху/нормативами; у курсі — вони є частиною умов задачі.

---

## 3) Покроковий аналітичний розв'язок

### Крок 1. Маси чавуну та брухту
$$
 m_{hm} = m_{charge}\,(1-w_{scr}), \qquad m_{scr} = m_{charge}\,w_{scr}
$$

де:

- $m_{hm}$ — маса рідкого чавуну в металевій шихті, кг
- $m_{scr}$ — маса сталевого брухту в металевій шихті, кг
- $m_{charge}$ — база розрахунку (маса металевої шихти), кг
- $w_{scr}$ — частка брухту в металевій шихті, частка одиниці

### Крок 2. Маса елемента у шихті
Для елемента $i\in\{Si,Mn,P,C\}$:
$$
 m_i^{in} = m_{hm}\,\frac{[i]_{hm}}{100} + m_{scr}\,\frac{[i]_{scr}}{100}
$$

де:

- $i$ — елемент ($Si$, $Mn$, $P$, $C$)
- $m_i^{in}$ — маса елемента $i$ у металевій шихті до продувки, кг
- $[i]_{hm}$ — вміст елемента $i$ у чавуні, %
- $[i]_{scr}$ — вміст елемента $i$ у брухті, %

### Крок 3. Маса елемента у сталі після плавки
Приймаємо, що маса сталі близька до маси металевої шихти. Для першого наближення:
$$
 m_{steel}^{(0)} = m_{charge}
$$

де:

- $m_{steel}^{(0)}$ — перше наближення маси рідкої сталі після плавки, кг

Тоді:
$$
 m_i^{st} = m_{steel}^{(0)}\,\frac{[i]_{st}}{100}
$$

де:

- $m_i^{st}$ — маса елемента $i$ у сталі після плавки (залишок у металі), кг
- $[i]_{st}$ — вміст елемента $i$ у сталі після плавки, %

### Крок 4. Маса окисненого елемента
$$
 \Delta m_i = m_i^{in} - m_i^{st}
$$

де:

- $\Delta m_i$ — маса елемента $i$, що окиснилася під час продувки, кг

### Крок 5. Перехід у оксиди (стехіометрія)
Маса оксиду:
$$
 m_{ox} = \Delta m_i\,\frac{M_{ox}}{M_i}
$$

де:

- $m_{ox}$ — маса оксиду, що утворився з елемента $i$, кг
- $M_{ox}$ — молярна маса відповідного оксиду, г/моль
- $M_i$ — молярна маса елемента $i$, г/моль

Для найважливіших компонентів (точні молярні маси, г/моль):

- $SiO_2$: $M_{Si}=28.0855$, $M_{SiO_2}=60.0843$
- $MnO$: $M_{Mn}=54.9380$, $M_{MnO}=70.9374$
- $P_2O_5$: $M_{P}=30.9738$, $M_{P_2O_5}=141.9445$
- $CO$: $M_{C}=12.011$, $M_{CO}=28.010$
- $CO_2$: $M_{C}=12.011$, $M_{CO_2}=44.009$

Для газів (враховуючи частку $\alpha_{CO}$):
$$
 m_{CO} = \alpha_{CO} \cdot \Delta m_C \cdot \frac{M_{CO}}{M_C}
$$
$$
 m_{CO_2} = (1 - \alpha_{CO}) \cdot \Delta m_C \cdot \frac{M_{CO_2}}{M_C}
$$

де:

- $m_{CO}, m_{CO_2}$ — маси утворених газів, кг
- $\alpha_{CO}$ — частка вуглецю, що окиснюється до $CO$, частка одиниці
- $\Delta m_C$ — загальна маса окисненого вуглецю, кг

### Крок 6. Розрахунок маси вапна за основністю
Нехай вапно має частки $x_{CaO}^{lime}$, $x_{SiO_2}^{lime}$. Основність визначається як:
$$
 B = \frac{m_{CaO}^{total}}{m_{SiO_2}^{total}}
$$

де:

- $B$ — основність шлаку $CaO/SiO_2$, безрозмірна
- $m_{CaO}^{total}$ — загальна маса $CaO$ у шлаку, кг
- $m_{SiO_2}^{total}$ — загальна маса $SiO_2$ у шлаку, кг
- $x_{CaO}^{lime}$ — масова частка $CaO$ у вапні, частка одиниці
- $x_{SiO_2}^{lime}$ — масова частка $SiO_2$ у вапні, частка одиниці

Де:
$$
 m_{CaO}^{total} = m_{lime}\,x_{CaO}^{lime}
$$
$$
 m_{SiO_2}^{total} = m_{SiO_2}^{ox} + m_{lime}\,x_{SiO_2}^{lime}
$$

де:

- $m_{lime}$ — маса доданого вапна, кг
- $m_{SiO_2}^{ox}$ — маса $SiO_2$, що утворилась при окисненні $Si$, кг

Тоді:
$$
 m_{lime}\,x_{CaO}^{lime} = B\,\left(m_{SiO_2}^{ox} + m_{lime}\,x_{SiO_2}^{lime}\right)
$$
Звідси:
$$
 m_{lime} = \frac{B\,m_{SiO_2}^{ox}}{x_{CaO}^{lime} - B\,x_{SiO_2}^{lime}}
$$

Вираз у знаменнику ($x_{CaO}^{lime} - B \cdot x_{SiO_2}^{lime}$) відображає **«ефективну здатність вапна до олужнення»**. Оскільки вапно містить власний діоксид кремнію ($x_{SiO_2}^{lime}$), частина його $CaO$ витрачається на забезпечення основності самого вапна. Тільки залишок (ця різниця) здатний зв'язувати кремній, що надходить у шлак від окиснення домішок чавуну.

**Умова реалізовності:** $x_{CaO}^{lime} - B\,x_{SiO_2}^{lime} > 0$.
Це критично важлива умова: якщо вона не виконується (знаменник $\le 0$), то кожний доданий кілограм вапна приносить у шлак більше $SiO_2$, ніж власного $CaO$ для його нейтралізації до рівня $B$. У такому разі задану основність $B$ отримати фізично неможливо.

### Крок 7. Оцінка маси шлаку
Для навчального розрахунку приймаємо, що сума $(CaO + SiO_2 + MnO + P_2O_5)$ складає $k_{main}=0.80$ маси шлаку:
$$
 m_{slag} = \frac{m_{CaO}^{total} + m_{SiO_2}^{total} + m_{MnO} + m_{P_2O_5}}{k_{main}}
$$

де:

- $m_{slag}$ — маса шлаку, кг
- $m_{MnO}$ — маса $MnO$, що утворилась при окисненні $Mn$, кг
- $m_{P_2O_5}$ — маса $P_2O_5$, що утворилась при окисненні $P$, кг
- $k_{main}$ — частка суми $(CaO + SiO_2 + MnO + P_2O_5)$ у загальній масі шлаку (прийнятий параметр моделі), частка одиниці

### Крок 8. Втрати заліза в шлак і з пилом
$$
 m_{FeO} = w_{FeO}\,m_{slag}
$$

де:

- $m_{FeO}$ — маса $FeO$ у шлаку, кг
- $w_{FeO}$ — масова частка $FeO$ у шлаку (прийнятий параметр моделі), частка одиниці

Маса заліза, що зв'язана у $FeO$:
$$
 m_{Fe\to slag} = m_{FeO}\,\frac{M_{Fe}}{M_{FeO}}
$$
де $M_{Fe}=55.845$, $M_{FeO}=71.844$.

де:

- $m_{Fe\to slag}$ — маса заліза, що перейшла у шлак у складі $FeO$, кг

Втрати з пилом:
$$
 m_{dust} = k_{dust}\,m_{charge}
$$

де:

- $m_{dust}$ — втрати маси металу з пилом/виносами (навчальна оцінка), кг
- $k_{dust}$ — частка втрат з пилом (прийнятий параметр моделі), частка одиниці

### Крок 9. Оцінка маси сталі та виходу
Для першого наближення оцінюємо масу сталі як різницю між масою шихти та втратами:
$$
 m_{steel} = m_{charge} - (\Delta m_{Si}+\Delta m_{Mn}+\Delta m_{P}+\Delta m_C) - m_{Fe\to slag} - m_{dust}
$$

де:

- $m_{steel}$ — маса рідкої сталі після плавки (оцінка), кг
- $\Delta m_C$ — маса вуглецю, що окиснилась і вийшла з металу у газову фазу, кг

Вихід:
$$
 Yield = \frac{m_{steel}}{m_{charge}}\cdot 100\%.
$$

де:

- $Yield$ — вихід сталі відносно маси металевої шихти, %

### Приклад числового розрахунку (варіант 20)
Далі наведено приклад обчислень для одного варіанта, щоб студент бачив типові порядки величин і міг звірити проміжні кроки.

Варіант 20 (як у таблиці):

- $m_{charge}=1000\ \text{кг}$
- $w_{scr}=0.300$
- $[Si]_{hm}=1.40\%$, $[Mn]_{hm}=0.70\%$, $[P]_{hm}=0.04\%$
- $B=3.4$

1) Маси чавуну і брухту:

- $m_{hm}=1000\cdot(1-0.300)=700\ \text{кг}$
- $m_{scr}=1000\cdot0.300=300\ \text{кг}$

2) Маса елементів у шихті (до продувки):

- $m_{Si}^{in}=700\cdot\frac{1.40}{100}+300\cdot\frac{0.25}{100}=10.5500\ \text{кг}$
- $m_{Mn}^{in}=700\cdot\frac{0.70}{100}+300\cdot\frac{0.40}{100}=6.1000\ \text{кг}$
- $m_{P}^{in}=700\cdot\frac{0.04}{100}+300\cdot\frac{0.02}{100}=0.3400\ \text{кг}$
- $m_{C}^{in}=700\cdot\frac{4.60}{100}+300\cdot\frac{0.20}{100}=32.8000\ \text{кг}$

3) Маса елементів у сталі (залишок):

 У цій моделі $m_{steel}$ входить у розрахунок залишкових мас $m_i^{st}=m_{steel}\cdot\frac{[i]_{st}}{100}$, тому $m_{steel}$ уточнюємо ітераційно (аналогічно Python) до збіжності за критерієм:
 $$
  \left|m_{steel}^{(k+1)}-m_{steel}^{(k)}\right|<\varepsilon,\quad \varepsilon=0.1\ \text{кг}.
 $$

 Схема ітерації:

 - задаємо початкове наближення $m_{steel}^{(0)}$;
 - на кроці $k$ обчислюємо залишкові маси $m_i^{st,(k)}=m_{steel}^{(k)}\cdot\frac{[i]_{st}}{100}$;
 - далі за Кроками 4–8 визначаємо $\Delta m_i^{(k)}$, маси оксидів, $m_{slag}^{(k)}$, $m_{Fe\to slag}^{(k)}$;
 - оновлюємо $m_{steel}^{(k+1)}$ за формулою Кроку 9.

 ---
 **Ітерація №1**
 Початкове припущення: $m_{steel}^{(0)} = 1000$ кг.

 1. **Залишок у сталі ($m_i^{st}$):**
    - $m_{Si}^{st} = 1000 \cdot 0.00005 = 0.0500$ кг
    - $m_{Mn}^{st} = 1000 \cdot 0.0010 = 1.0000$ кг
    - $m_{P}^{st} = 1000 \cdot 0.00015 = 0.1500$ кг
    - $m_{C}^{st} = 1000 \cdot 0.0010 = 1.0000$ кг

 2. **Окиснення ($\Delta m_i = m_i^{in} - m_i^{st}$):**
    - $\Delta m_{Si} = 10.5500 - 0.0500 = 10.5000$ кг
    - $\Delta m_{Mn} = 6.1000 - 1.0000 = 5.1000$ кг
    - $\Delta m_{P} = 0.3400 - 0.1500 = 0.1900$ кг
    - $\Delta m_{C} = 32.8000 - 1.0000 = 31.8000$ кг

 3. **Маси оксидів та вапна:**
    - $m_{SiO_2} = 10.5000 \cdot (60.0843/28.0855) = 22.4630$ кг
    - $m_{MnO} = 5.1000 \cdot (70.9374/54.9380) = 6.5852$ кг
    - $m_{P_2O_5} = 0.1900 \cdot (141.9445/(2\cdot30.9738)) = 0.4354$ кг
    - $m_{lime} = (3.4 \cdot 22.4630) / (0.90 - 3.4 \cdot 0.02) = 91.7959$ кг

 4. **Маса шлаку та втрати Fe:**
    - $m_{CaO}^{total} = 91.7959 \cdot 0.90 = 82.6163$ кг
    - $m_{SiO_2}^{total} = 22.4630 + 91.7959 \cdot 0.02 = 24.2989$ кг
    - $m_{slag} = (82.6163 + 24.2989 + 6.5852 + 0.4354) / 0.80 = 142.4198$ кг
    - $m_{FeO} = 142.4198 \cdot 0.15 = 21.3630$ кг
    - $m_{Fe\to slag} = 21.3630 \cdot (55.845/71.844) = 16.6056$ кг

 5. **Оцінка нової маси сталі:**
    - $m_{steel}^{(1)} = 1000 - (10.5000 + 5.1000 + 0.1900 + 31.8000) - 16.6056 - 15.0 = 920.8044$ кг
    - **Перевірка:** $|920.8044 - 1000| = 79.1956 > 0.1$. Потрібна наступна ітерація.

 ---
 **Ітерація №2**
 Вхідне значення: $m_{steel}^{(1)} = 920.8044$ кг.

 1. **Залишок у сталі:**
    - $m_{Si}^{st} = 920.8044 \cdot 0.00005 = 0.0460$ кг
    - $m_{Mn}^{st} = 920.8044 \cdot 0.0010 = 0.9208$ кг
    - $m_{P}^{st} = 920.8044 \cdot 0.00015 = 0.1381$ кг
    - $m_{C}^{st} = 920.8044 \cdot 0.0010 = 0.9208$ кг

 2. **Окиснення:**
    - $\Delta m_{Si} = 10.5500 - 0.0460 = 10.5040$ кг
    - $\Delta m_{Mn} = 6.1000 - 0.9208 = 5.1792$ кг
    - $\Delta m_{P} = 0.3400 - 0.1381 = 0.2019$ кг
    - $\Delta m_{C} = 32.8000 - 0.9208 = 31.8792$ кг

 3. **Маси оксидів та вапна:**
    - $m_{SiO_2} = 10.5040 \cdot 2.1393 = 22.4715$ кг
    - $m_{MnO} = 5.1792 \cdot 1.2912 = 6.6875$ кг
    - $m_{P_2O_5} = 0.2019 \cdot 2.2914 = 0.4626$ кг
    - $m_{lime} = (3.4 \cdot 22.4715) / 0.832 = 91.8329$ кг

 4. **Маса шлаку та втрати Fe:**
    - $m_{slag} = (82.6496 + 24.3082 + 6.6875 + 0.4626) / 0.80 = 142.6349$ кг
    - $m_{Fe\to slag} = (142.6349 \cdot 0.15) \cdot 0.7773 = 16.6308$ кг

 5. **Оцінка нової маси сталі:**
    - $m_{steel}^{(2)} = 1000 - (10.5040 + 5.1792 + 0.2019 + 31.8792) - 16.6308 - 15.0 = 920.6049$ кг
    - **Перевірка:** $|920.6049 - 920.8044| = 0.1995 > 0.1$. Потрібна наступна ітерація.

 ---
 **Ітерація №3**
 Вхідне значення: $m_{steel}^{(2)} = 920.6049$ кг.

 1. **Залишок у сталі:**
    - $m_{Si}^{st} = 0.0460$ кг, $m_{Mn}^{st} = 0.9206$ кг, $m_{P}^{st} = 0.1381$ кг, $m_{C}^{st} = 0.9206$ кг

 2. **Окиснення:**
    - $\Delta m_{Si} = 10.5040$ кг, $\Delta m_{Mn} = 5.1794$ кг, $\Delta m_{P} = 0.2019$ кг, $\Delta m_{C} = 31.8794$ кг

 3. **Маси оксидів, шлаку та втрат:**
    - $m_{SiO_2} = 22.4715$ кг, $m_{MnO} = 6.6878$ кг, $m_{P_2O_5} = 0.4626$ кг
    - $m_{lime} = 91.8329$ кг, $m_{slag} = 142.6353$ кг, $m_{Fe\to slag} = 16.6308$ кг

 4. **Оцінка нової маси сталі:**
    - $m_{steel}^{(3)} = 1000 - (10.5040 + 5.1794 + 0.2019 + 31.8794) - 16.6308 - 15.0 = 920.6045$ кг
    - **Перевірка:** $|920.6045 - 920.6049| = 0.0004 < 0.1$. **Збіжність досягнута.**

 ---

 Після збіжності отримано остаточну масу $m_{steel}=920.60$ кг та відповідні залишкові маси елементів:

 - $m_{Si}^{st}=920.60\cdot\frac{0.005}{100}=0.0460\ \text{кг}$
 - $m_{Mn}^{st}=920.60\cdot\frac{0.10}{100}=0.9206\ \text{кг}$
 - $m_{P}^{st}=920.60\cdot\frac{0.015}{100}=0.1381\ \text{кг}$
 - $m_{C}^{st}=920.60\cdot\frac{0.10}{100}=0.9206\ \text{кг}$

4) Окиснення:

 - $\Delta m_{Si}=10.5500-0.0460=10.5040\ \text{кг}$
 - $\Delta m_{Mn}=6.1000-0.9206=5.1794\ \text{кг}$
 - $\Delta m_{P}=0.3400-0.1381=0.2019\ \text{кг}$
 - $\Delta m_{C}=32.8000-0.9206=31.8794\ \text{кг}$

5) Оксиди (стехіометрія):

 - $m_{SiO_2}=\Delta m_{Si}\cdot\frac{60.0843}{28.0855}=22.4715\ \text{кг}$
 - $m_{MnO}=\Delta m_{Mn}\cdot\frac{70.9374}{54.9380}=6.6878\ \text{кг}$
 - $m_{P_2O_5}=\Delta m_{P}\cdot\frac{141.9445}{2\cdot30.9738}=0.4626\ \text{кг}$
 Коефіцієнт $2$ у знаменнику з’являється тому, що в оксиді $P_2O_5$ міститься два атоми фосфору.

6) Вапно за основністю:

- перевірка: $x_{CaO}^{lime}-B\,x_{SiO_2}^{lime}=0.90-3.4\cdot0.02=0.832>0$
 - $m_{lime}=\frac{B\,m_{SiO_2}}{x_{CaO}^{lime}-B\,x_{SiO_2}^{lime}}=\frac{3.4\cdot22.4715}{0.832}=91.83\ \text{кг}$

7) Шлак:

 - $m_{CaO}^{total}=91.83\cdot0.90=82.6476\ \text{кг}$
 - $m_{SiO_2}^{total}=22.4715+91.83\cdot0.02=24.3081\ \text{кг}$
 - $m_{slag}=\frac{82.6476+24.3081+6.6878+0.4626}{0.80}=142.63\ \text{кг}$

8) Втрати заліза і сталь:

 - $m_{FeO}=0.15\cdot142.63=21.3949\ \text{кг}$
 - $m_{Fe\to slag}=21.3949\cdot\frac{55.845}{71.844}=16.6305\ \text{кг}$
 - $m_{dust}=0.015\cdot1000=15.00\ \text{кг}$

 Газова фаза (прийнято $\alpha_{CO}=0.90$):

 - $m_{CO}=0.90\cdot31.8794\cdot\frac{28.010}{12.011}=66.91\ \text{кг}$
 - $m_{CO_2}=0.10\cdot31.8794\cdot\frac{44.009}{12.011}=11.68\ \text{кг}$

Маса сталі та вихід:

 - $m_{steel}=1000-16.63-15.00-10.5040-5.1794-0.2019-31.8794=920.60\ \text{кг}$
 - $Yield=\frac{920.60}{1000}\cdot100\%=92.06\%$

---

## 4) Розв'язок за допомогою python скрипта


```python
"""Практична робота №1 (Python): статичний матеріальний баланс шихти."""

# Демонстраційні дані в цьому файлі відповідають варіанту 20 з таблиці.

# ============================================================
# 0) Вхідні дані (ОБЕРІТЬ свій варіант і підставте числа)
# ============================================================

variant_no = 20

# База розрахунку: маса металевої шихти (чавун + брухт)
m_charge = 1000.0  # кг

# Вміст елементів у чавуні (у відсотках маси, %)
Si_hm = 1.40  # %
Mn_hm = 0.70  # %
P_hm = 0.04   # %
C_hm = 4.60   # % (у цій роботі використовується для розрахунку газової фази та маси сталі)

# Частка брухту у металевій шихті (частка одиниці)
w_scr = 0.300  # -

# Основність шлаку (безрозмірна)
B = 3.4  # -

# ============================================================
# 1) Прийняті (типові) дані для навчального розрахунку
# ============================================================

# Типовий склад брухту (%). Якщо в умові задано інше — замініть.
Si_scr = 0.25  # %
Mn_scr = 0.40  # %
P_scr = 0.02   # %
C_scr = 0.20   # %

# Залишковий вміст елементів у сталі після плавки (%).
# Це спрощене припущення для статичного балансу.
Si_st = 0.005  # %
Mn_st = 0.10   # %
P_st = 0.015   # %
C_st = 0.10    # %

# Частка вуглецю, що виходить як CO (решта 1-alpha_CO — як CO2)
alpha_CO = 0.90  # частка одиниці

# Склад вапна (масові частки). Наприклад: 90% CaO і 2% SiO2.
x_CaO_lime = 0.90   # частка одиниці
x_SiO2_lime = 0.02  # частка одиниці

# Параметри спрощеної моделі шлаку і втрат
k_main = 0.80   # частка (CaO + SiO2 + MnO + P2O5) у масі шлаку
w_FeO = 0.15    # масова частка FeO у шлаку
k_dust = 0.015  # частка втрат з пилом від маси шихти

# Молярні маси (г/моль). Вони потрібні для переходу від маси елемента до маси оксиду/газу.
M_Si = 28.0855
M_SiO2 = 60.0843
M_Mn = 54.9380
M_MnO = 70.9374
M_P = 30.9738
M_P2O5 = 141.9445
M_C = 12.011
M_CO = 28.010
M_CO2 = 44.009
M_Fe = 55.845
M_FeO = 71.844

# ============================================================
# 2) Крок 1. Маси чавуну і брухту
# ============================================================

# Чавун і брухт разом дають m_charge.
m_hm = m_charge * (1.0 - w_scr)  # кг
m_scr = m_charge * w_scr         # кг

# ============================================================
# 3) Крок 2. Маса елементів у шихті ДО продувки
# ============================================================

# Переведення % -> частка: ділимо на 100.
Si_in = m_hm * (Si_hm / 100.0) + m_scr * (Si_scr / 100.0)  # кг
Mn_in = m_hm * (Mn_hm / 100.0) + m_scr * (Mn_scr / 100.0)  # кг
P_in = m_hm * (P_hm / 100.0) + m_scr * (P_scr / 100.0)     # кг
C_in = m_hm * (C_hm / 100.0) + m_scr * (C_scr / 100.0)     # кг

# ============================================================
# 4) Крок 3. Маса елементів у сталі ПІСЛЯ плавки (залишок у металі)
# ============================================================

# Для академічно узгодженого балансу виконуємо уточнення до збіжності:
# на кожній ітерації перераховуємо залишкові m_i^st від поточної m_steel0,
# а потім оновлюємо m_steel_new з урахуванням (Δm_i) і втрат.
eps_steel = 0.1   # кг
max_iter = 50
iter_no = 0

# Перше наближення: маса сталі близька до маси шихти.
m_steel0 = m_charge  # кг

ok = True

while True:
    # ============================================================
    # 4) Крок 3. Маса елементів у сталі ПІСЛЯ плавки (залишок у металі)
    # ============================================================
    Si_st_mass = m_steel0 * (Si_st / 100.0)  # кг
    Mn_st_mass = m_steel0 * (Mn_st / 100.0)  # кг
    P_st_mass = m_steel0 * (P_st / 100.0)    # кг
    C_st_mass = m_steel0 * (C_st / 100.0)    # кг

    # ============================================================
    # 5) Крок 4. Скільки елемента окиснилось
    # ============================================================
    dSi = Si_in - Si_st_mass  # кг
    dMn = Mn_in - Mn_st_mass  # кг
    dP = P_in - P_st_mass     # кг
    dC = C_in - C_st_mass     # кг

    # У цій навчальній моделі не допускаємо від'ємних значень (якщо вони з'явились — приймаємо 0).
    if dSi < 0:
        dSi = 0.0
    if dMn < 0:
        dMn = 0.0
    if dP < 0:
        dP = 0.0
    if dC < 0:
        dC = 0.0

    # ============================================================
    # 6) Крок 5. Перехід в оксиди (стехіометрія)
    # ============================================================
    m_SiO2_ox = dSi * (M_SiO2 / M_Si)  # кг
    m_MnO_ox = dMn * (M_MnO / M_Mn)    # кг
    m_P2O5_ox = dP * (M_P2O5 / (2.0 * M_P))  # кг

    # Газова фаза від окиснення вуглецю (навчальна оцінка)
    m_CO = alpha_CO * dC * (M_CO / M_C)            # кг
    m_CO2 = (1.0 - alpha_CO) * dC * (M_CO2 / M_C)  # кг

    # ============================================================
    # 7) Крок 6. Вапно за заданою основністю B = CaO/SiO2
    # ============================================================
    # denom — ефективна здатність вапна до олужнення (з урахуванням власного SiO2)
    denom = x_CaO_lime - B * x_SiO2_lime
    if denom <= 0:
        print("УВАГА: x_CaO_lime - B*x_SiO2_lime <= 0. Задану основність забезпечити неможливо в межах цієї моделі.")
        print("Зупинка розрахунку для цього варіанта.")
        ok = False
        break

    m_lime = (B * m_SiO2_ox) / denom  # кг
    m_CaO_total = m_lime * x_CaO_lime                    # кг
    m_SiO2_total = m_SiO2_ox + m_lime * x_SiO2_lime      # кг

    # ============================================================
    # 8) Крок 7. Оцінка маси шлаку
    # ============================================================
    m_slag = (m_CaO_total + m_SiO2_total + m_MnO_ox + m_P2O5_ox) / k_main  # кг

    # ============================================================
    # 9) Крок 8. Втрати заліза у шлак і з пилом
    # ============================================================
    m_FeO = w_FeO * m_slag  # кг
    m_Fe_to_slag = m_FeO * (M_Fe / M_FeO)  # кг
    m_dust = k_dust * m_charge  # кг

    # ============================================================
    # 10) Крок 9. Маса сталі та вихід
    # ============================================================
    m_steel_new = m_charge - (dSi + dMn + dP + dC) - m_Fe_to_slag - m_dust  # кг

    # Критерій зупинки
    if abs(m_steel_new - m_steel0) < eps_steel:
        m_steel = m_steel_new
        Yield = (m_steel / m_charge) * 100.0
        break

    iter_no += 1
    if iter_no >= max_iter:
        print("УВАГА: досягнуто max_iter, зупинка уточнення.")
        m_steel = m_steel_new
        Yield = (m_steel / m_charge) * 100.0
        break

    m_steel0 = m_steel_new

# ============================================================
# 11) Вивід результатів (з одиницями)
# ============================================================

print("=" * 68)
print("Практична робота №1 — матеріальний баланс шихти (навчальна модель)")
print("Формат виводу: навчальний (кроки + контрольні величини + одиниці)")
print("=" * 68)

print(f"1) Вхідні дані (варіант {variant_no})")
print(f"   База розрахунку: m_charge = {m_charge:.1f} кг")
print(f"   Частка брухту:   w_scr    = {w_scr:.3f} (-)")
print(f"   Основність:      B       = {B:.2f} (-)")
print("   Склад чавуну (мас.%):")
print(f"     Si_hm = {Si_hm:.3f} %, Mn_hm = {Mn_hm:.3f} %, P_hm = {P_hm:.3f} %, C_hm = {C_hm:.3f} %")

print("\n2) Крок 1 — Маси чавуну і брухту")
print(f"   m_hm  = {m_hm:.1f} кг")
print(f"   m_scr = {m_scr:.1f} кг")
print(f"   Перевірка: m_hm + m_scr = {(m_hm + m_scr):.1f} кг (має дорівнювати {m_charge:.1f} кг)")

print("\n3) Крок 2 — Маса елементів у шихті ДО продувки")
print("   (перехід % -> частка: ділимо на 100)")
print(f"   Si_in = {Si_in:.4f} кг")
print(f"   Mn_in = {Mn_in:.4f} кг")
print(f"   P_in  = {P_in:.4f} кг")
print(f"   C_in  = {C_in:.4f} кг")

print("\n4) Крок 3 — Маса елементів у сталі ПІСЛЯ плавки (залишок у металі)")
print(f"   Уточнення до збіжності: ε = {eps_steel:.1f} кг, ітерацій = {iter_no + 1}")
print(f"   m_steel0 (для розрахунку залишку) = {m_steel0:.1f} кг")
print(f"   Si_st_mass = {Si_st_mass:.4f} кг")
print(f"   Mn_st_mass = {Mn_st_mass:.4f} кг")
print(f"   P_st_mass  = {P_st_mass:.4f} кг")
print(f"   C_st_mass  = {C_st_mass:.4f} кг")

print("\n5) Крок 4 — Скільки елемента окиснилось")
print(f"   Δm_Si = {dSi:.4f} кг")
print(f"   Δm_Mn = {dMn:.4f} кг")
print(f"   Δm_P  = {dP:.4f} кг")
print(f"   Δm_C  = {dC:.4f} кг")

print("\n6) Крок 5 — Перехід в оксиди (стехіометрія)")
print("   Формула: m_оксиду = m_елемента * (M_оксиду / M_елемента)")
print(f"   SiO2 = {m_SiO2_ox:.4f} кг")
print(f"   MnO  = {m_MnO_ox:.4f} кг")
print(f"   P2O5 = {m_P2O5_ox:.4f} кг")
print(f"   CO   = {m_CO:.2f} кг")
print(f"   CO2  = {m_CO2:.2f} кг")

print("\n7) Крок 6 — Вапно для забезпечення заданої основності")
print("   B = (CaO_total) / (SiO2_total)")
print(f"   Перевірка реалізовності: x_CaO_lime - B*x_SiO2_lime = {denom:.6f} (-)")
if ok:
    print(f"   m_lime = {m_lime:.2f} кг")
    print(f"   CaO_total  = {m_CaO_total:.4f} кг")
    print(f"   SiO2_total = {m_SiO2_total:.4f} кг")

print("\n8) Крок 7 — Оцінка маси шлаку")
print(f"   Прийнято: k_main = {k_main:.2f} (-), тобто (CaO+SiO2+MnO+P2O5) = {k_main*100:.0f}% шлаку")
if ok:
    print(f"   m_slag = {m_slag:.2f} кг")

print("\n9) Крок 8 — Втрати заліза")
print(f"   Прийнято: w_FeO = {w_FeO:.2f} (-), тобто FeO = {w_FeO*100:.0f}% шлаку")
if ok:
    print(f"   m_FeO        = {m_FeO:.4f} кг")
    print(f"   m_Fe_to_slag = {m_Fe_to_slag:.4f} кг")
    print(f"   Втрати з пилом: m_dust = {m_dust:.2f} кг (k_dust = {k_dust:.3f})")

print("\n10) Крок 9 — Сталь і вихід")
if ok:
    print(f"   m_steel = {m_steel:.2f} кг")
    print(f"   Yield   = {Yield:.2f} %")

print("\n11) Контроль розмірностей (коротко)")
print("   Усі маси: кг, умісти: %, у формулах: частка, основність: безрозмірна")
print("=" * 68)
```

    ====================================================================
    Практична робота №1 — матеріальний баланс шихти (навчальна модель)
    Формат виводу: навчальний (кроки + контрольні величини + одиниці)
    ====================================================================
    1) Вхідні дані (варіант 20)
       База розрахунку: m_charge = 1000.0 кг
       Частка брухту:   w_scr    = 0.300 (-)
       Основність:      B       = 3.40 (-)
       Склад чавуну (мас.%):
         Si_hm = 1.400 %, Mn_hm = 0.700 %, P_hm = 0.040 %, C_hm = 4.600 %
    
    2) Крок 1 — Маси чавуну і брухту
       m_hm  = 700.0 кг
       m_scr = 300.0 кг
       Перевірка: m_hm + m_scr = 1000.0 кг (має дорівнювати 1000.0 кг)
    
    3) Крок 2 — Маса елементів у шихті ДО продувки
       (перехід % -> частка: ділимо на 100)
       Si_in = 10.5500 кг
       Mn_in = 6.1000 кг
       P_in  = 0.3400 кг
       C_in  = 32.8000 кг
    
    4) Крок 3 — Маса елементів у сталі ПІСЛЯ плавки (залишок у металі)
       Уточнення до збіжності: ε = 0.1 кг, ітерацій = 3
       m_steel0 (для розрахунку залишку) = 920.6 кг
       Si_st_mass = 0.0460 кг
       Mn_st_mass = 0.9206 кг
       P_st_mass  = 0.1381 кг
       C_st_mass  = 0.9206 кг
    
    5) Крок 4 — Скільки елемента окиснилось
       Δm_Si = 10.5040 кг
       Δm_Mn = 5.1794 кг
       Δm_P  = 0.2019 кг
       Δm_C  = 31.8794 кг
    
    6) Крок 5 — Перехід в оксиди (стехіометрія)
       Формула: m_оксиду = m_елемента * (M_оксиду / M_елемента)
       SiO2 = 22.4715 кг
       MnO  = 6.6878 кг
       P2O5 = 0.4626 кг
       CO   = 66.91 кг
       CO2  = 11.68 кг
    
    7) Крок 6 — Вапно для забезпечення заданої основності
       B = (CaO_total) / (SiO2_total)
       Перевірка реалізовності: x_CaO_lime - B*x_SiO2_lime = 0.832000 (-)
       m_lime = 91.83 кг
       CaO_total  = 82.6476 кг
       SiO2_total = 24.3081 кг
    
    8) Крок 7 — Оцінка маси шлаку
       Прийнято: k_main = 0.80 (-), тобто (CaO+SiO2+MnO+P2O5) = 80% шлаку
       m_slag = 142.63 кг
    
    9) Крок 8 — Втрати заліза
       Прийнято: w_FeO = 0.15 (-), тобто FeO = 15% шлаку
       m_FeO        = 21.3949 кг
       m_Fe_to_slag = 16.6305 кг
       Втрати з пилом: m_dust = 15.00 кг (k_dust = 0.015)
    
    10) Крок 9 — Сталь і вихід
       m_steel = 920.60 кг
       Yield   = 92.06 %
    
    11) Контроль розмірностей (коротко)
       Усі маси: кг, умісти: %, у формулах: частка, основність: безрозмірна
    ====================================================================
    

---

### Порівняння аналітичного розв'язку та Python-скрипта
Python-скрипт реалізує ті самі формули, що й аналітичний розрахунок. Для варіанта 20 числові результати мають співпадати (з точністю округлення) для ключових контрольних величин:

| Контрольна величина | Аналітичний розрахунок (варіант 20) | Python-скрипт (варіант 20) | Різниця |
|---|---:|---:|---:|
| $x_{CaO}^{lime} - B\,x_{SiO_2}^{lime}$, - | 0.8320 | 0.8320 | 0.0000 |
| $m_{hm}$, кг | 700.0 | 700.0 | 0.0 |
| $m_{scr}$, кг | 300.0 | 300.0 | 0.0 |
| $m_{Si}^{in}$, кг | 10.5500 | 10.5500 | 0.0000 |
| $\Delta m_{Si}$, кг | 10.5040 | 10.5040 | 0.0000 |
| $m_{Mn}^{in}$, кг | 6.1000 | 6.1000 | 0.0000 |
| $\Delta m_{Mn}$, кг | 5.1794 | 5.1794 | 0.0000 |
| $\Delta m_{C}$, кг | 31.8794 | 31.8794 | 0.0000 |
| $m_{SiO_2}$, кг | 22.4715 | 22.4715 | 0.0000 |
| $m_{MnO}$, кг | 6.6878 | 6.6878 | 0.0000 |
| $m_{P_2O_5}$, кг | 0.4626 | 0.4626 | 0.0000 |
| $m_{CO}$, кг | 66.91 | 66.91 | 0.00 |
| $m_{CO_2}$, кг | 11.68 | 11.68 | 0.00 |
| $m_{lime}$, кг | 91.83 | 91.83 | 0.00 |
| $m_{slag}$, кг | 142.63 | 142.63 | 0.00 |
| $m_{steel}$, кг | 920.60 | 920.60 | 0.00 |
| $Yield$, % | 92.06 | 92.06 | 0.00 |

Невеликі відмінності (якщо з’являються) зумовлені округленням чисел у прикладах та форматуванням чисел у виводі.

## 5) Висновки
1. Модель показує причинно-наслідковий ланцюг: збільшення $[Si]_{hm}$ підвищує $\Delta m_{Si}$, збільшує $m_{SiO_2}$, а це при фіксованій основності $B$ веде до зростання потреби у вапні $m_{lime}$.
2. Зростання $m_{lime}$, як правило, збільшує масу шлаку $m_{slag}$. За прийнятої частки $w_{FeO}$ це підвищує $m_{FeO}$ та втрати заліза $m_{Fe\to slag}$, що прямо знижує вихід сталі $Yield$.
3. Частка брухту $w_{scr}$ змінює баланс елементів у шихті через різний склад чавуну і брухту, а також змінює маси $m_{hm}$ і $m_{scr}$. Тому при переході між варіантами необхідно контролювати саме вхідні маси елементів $m_i^{in}$.
4. Критичною є умова реалізовності основності: $x_{CaO}^{lime}-B\,x_{SiO_2}^{lime}>0$. Якщо вона не виконується, то задану $B$ неможливо забезпечити для заданого складу флюсу в межах цієї спрощеної моделі.
5. Отримані результати є оцінковими, бо частина параметрів ($w_{FeO}$, $k_{dust}$, склад брухту, залишкові $[i]_{st}$, $k_{main}$) прийнята як типова. У виробничих розрахунках ці параметри задають за даними цеху або нормативами, і саме вони визначають точність прогнозу $m_{slag}$ та $Yield$.

---

## 6) 20 варіантів завдань для самостійного вирішення
Таблиця задає індивідуальні вхідні дані. У всіх варіантах базу розрахунку прийняти $m_{charge}=1000\ \text{кг}$.

| Варіант | $[Si]_{hm}$, % | $[Mn]_{hm}$, % | $[P]_{hm}$, % | $[C]_{hm}$, % | $w_{scr}$, частка | $B$ |
|---:|---:|---:|---:|---:|---:|---:|
| 1 | 0.45 | 0.32 | 0.10 | 4.03 | 0.205 | 3.2 |
| 2 | 0.50 | 0.34 | 0.10 | 4.06 | 0.210 | 3.4 |
| 3 | 0.55 | 0.36 | 0.09 | 4.09 | 0.215 | 3.0 |
| 4 | 0.60 | 0.38 | 0.09 | 4.12 | 0.220 | 3.2 |
| 5 | 0.65 | 0.40 | 0.09 | 4.15 | 0.225 | 3.4 |
| 6 | 0.70 | 0.42 | 0.08 | 4.18 | 0.230 | 3.0 |
| 7 | 0.75 | 0.44 | 0.08 | 4.21 | 0.235 | 3.2 |
| 8 | 0.80 | 0.46 | 0.08 | 4.24 | 0.240 | 3.4 |
| 9 | 0.85 | 0.48 | 0.07 | 4.27 | 0.245 | 3.0 |
| 10 | 0.90 | 0.50 | 0.07 | 4.30 | 0.250 | 3.2 |
| 11 | 0.95 | 0.52 | 0.07 | 4.33 | 0.255 | 3.4 |
| 12 | 1.00 | 0.54 | 0.06 | 4.36 | 0.260 | 3.0 |
| 13 | 1.05 | 0.56 | 0.06 | 4.39 | 0.265 | 3.2 |
| 14 | 1.10 | 0.58 | 0.06 | 4.42 | 0.270 | 3.4 |
| 15 | 1.15 | 0.60 | 0.05 | 4.45 | 0.275 | 3.0 |
| 16 | 1.20 | 0.62 | 0.05 | 4.48 | 0.280 | 3.2 |
| 17 | 1.25 | 0.64 | 0.05 | 4.51 | 0.285 | 3.4 |
| 18 | 1.30 | 0.66 | 0.04 | 4.54 | 0.290 | 3.0 |
| 19 | 1.35 | 0.68 | 0.04 | 4.57 | 0.295 | 3.2 |
| 20 | 1.40 | 0.70 | 0.04 | 4.60 | 0.300 | 3.4 |

**Примітка для самоперевірки:** у кожному варіанті перевірити, що $x_{CaO}^{lime} - B\,x_{SiO_2}^{lime} > 0$, інакше задану основність неможливо забезпечити в межах цієї спрощеної моделі.


```python
"""Практична робота №1 (Python): розрахунок усіх 20 варіантів.

Скрипт повторює навчальну модель з Практична1.md:
- статичний матеріальний баланс (чавун + брухт) на базі m_charge = 1000 кг
- врахування Si, Mn, P та C (газова фаза CO/CO2 через alpha_CO)
- утворення оксидів SiO2, MnO, P2O5
- підбір вапна за основністю B з урахуванням SiO2 у вапні
- оцінка маси шлаку через k_main
- втрати Fe через FeO у шлаку та втрати з пилом
- уточнення m_steel ітераціями до збіжності

Вивід: зведена таблиця по всіх 20 варіантах.
"""

from __future__ import annotations


def compute_variant(*,
                    variant_no: int,
                    Si_hm: float,
                    Mn_hm: float,
                    P_hm: float,
                    C_hm: float,
                    w_scr: float,
                    B: float) -> dict:
    # =============================
    # 0) Вхідні дані
    # =============================
    m_charge = 1000.0  # кг

    # =============================
    # 1) Прийняті (типові) дані моделі
    # =============================
    Si_scr = 0.25  # %
    Mn_scr = 0.40  # %
    P_scr = 0.02   # %
    C_scr = 0.20   # %

    Si_st = 0.005  # %
    Mn_st = 0.10   # %
    P_st = 0.015   # %
    C_st = 0.10    # %

    alpha_CO = 0.90

    x_CaO_lime = 0.90
    x_SiO2_lime = 0.02

    k_main = 0.80
    w_FeO = 0.15
    k_dust = 0.015

    # Молярні маси (г/моль)
    M_Si = 28.0855
    M_SiO2 = 60.0843
    M_Mn = 54.9380
    M_MnO = 70.9374
    M_P = 30.9738
    M_P2O5 = 141.9445
    M_C = 12.011
    M_CO = 28.010
    M_CO2 = 44.009
    M_Fe = 55.845
    M_FeO = 71.844

    # =============================
    # Крок 1. Маси чавуну і брухту
    # =============================
    m_hm = m_charge * (1.0 - w_scr)
    m_scr = m_charge * w_scr

    # =============================
    # Крок 2. Маса елементів у шихті
    # =============================
    Si_in = m_hm * (Si_hm / 100.0) + m_scr * (Si_scr / 100.0)
    Mn_in = m_hm * (Mn_hm / 100.0) + m_scr * (Mn_scr / 100.0)
    P_in = m_hm * (P_hm / 100.0) + m_scr * (P_scr / 100.0)
    C_in = m_hm * (C_hm / 100.0) + m_scr * (C_scr / 100.0)

    # =============================
    # Уточнення до збіжності для m_steel
    # =============================
    eps_steel = 0.1  # кг
    max_iter = 50

    iter_no = 0
    m_steel0 = m_charge

    ok = True
    reason = ""

    # Значення, які повернемо
    Si_st_mass = Mn_st_mass = P_st_mass = C_st_mass = 0.0
    dSi = dMn = dP = dC = 0.0
    m_SiO2_ox = m_MnO_ox = m_P2O5_ox = 0.0
    m_CO = m_CO2 = 0.0
    denom = 0.0
    m_lime = 0.0
    m_CaO_total = 0.0
    m_SiO2_total = 0.0
    m_slag = 0.0
    m_FeO = 0.0
    m_Fe_to_slag = 0.0
    m_dust = k_dust * m_charge
    m_steel = 0.0
    Yield = 0.0

    while True:
        # Крок 3. Залишок у сталі
        Si_st_mass = m_steel0 * (Si_st / 100.0)
        Mn_st_mass = m_steel0 * (Mn_st / 100.0)
        P_st_mass = m_steel0 * (P_st / 100.0)
        C_st_mass = m_steel0 * (C_st / 100.0)

        # Крок 4. Окиснення
        dSi = Si_in - Si_st_mass
        dMn = Mn_in - Mn_st_mass
        dP = P_in - P_st_mass
        dC = C_in - C_st_mass

        if dSi < 0:
            dSi = 0.0
        if dMn < 0:
            dMn = 0.0
        if dP < 0:
            dP = 0.0
        if dC < 0:
            dC = 0.0

        # Крок 5. Оксиди і газова фаза
        m_SiO2_ox = dSi * (M_SiO2 / M_Si)
        m_MnO_ox = dMn * (M_MnO / M_Mn)
        m_P2O5_ox = dP * (M_P2O5 / (2.0 * M_P))

        m_CO = alpha_CO * dC * (M_CO / M_C)
        m_CO2 = (1.0 - alpha_CO) * dC * (M_CO2 / M_C)

        # Крок 6. Вапно
        # denom — ефективна здатність вапна до олужнення (з урахуванням власного SiO2)
        denom = x_CaO_lime - B * x_SiO2_lime
        if denom <= 0:
            ok = False
            reason = "x_CaO_lime - B*x_SiO2_lime <= 0"
            break

        m_lime = (B * m_SiO2_ox) / denom
        m_CaO_total = m_lime * x_CaO_lime
        m_SiO2_total = m_SiO2_ox + m_lime * x_SiO2_lime

        # Крок 7. Шлак
        m_slag = (m_CaO_total + m_SiO2_total + m_MnO_ox + m_P2O5_ox) / k_main

        # Крок 8. Втрати Fe
        m_FeO = w_FeO * m_slag
        m_Fe_to_slag = m_FeO * (M_Fe / M_FeO)

        # Крок 9. Сталь і вихід
        m_steel_new = m_charge - (dSi + dMn + dP + dC) - m_Fe_to_slag - m_dust

        if abs(m_steel_new - m_steel0) < eps_steel:
            m_steel = m_steel_new
            Yield = (m_steel / m_charge) * 100.0
            break

        iter_no += 1
        if iter_no >= max_iter:
            ok = False
            reason = "досягнуто max_iter"
            m_steel = m_steel_new
            Yield = (m_steel / m_charge) * 100.0
            break

        m_steel0 = m_steel_new

    return {
        "variant": variant_no,
        "ok": ok,
        "reason": reason,
        "iter": iter_no + 1,
        "m_hm": m_hm,
        "m_scr": m_scr,
        "Si_in": Si_in,
        "Mn_in": Mn_in,
        "P_in": P_in,
        "C_in": C_in,
        "dSi": dSi,
        "dMn": dMn,
        "dP": dP,
        "dC": dC,
        "m_SiO2": m_SiO2_ox,
        "m_MnO": m_MnO_ox,
        "m_P2O5": m_P2O5_ox,
        "m_CO": m_CO,
        "m_CO2": m_CO2,
        "denom": denom,
        "m_lime": m_lime,
        "m_slag": m_slag,
        "m_FeO": m_FeO,
        "m_Fe_to_slag": m_Fe_to_slag,
        "m_steel": m_steel,
        "Yield": Yield,
    }


def main() -> None:
    variants = [
        # variant, Si_hm, Mn_hm, P_hm, C_hm, w_scr, B
        (1, 0.45, 0.32, 0.10, 4.03, 0.205, 3.2),
        (2, 0.50, 0.34, 0.10, 4.06, 0.210, 3.4),
        (3, 0.55, 0.36, 0.09, 4.09, 0.215, 3.0),
        (4, 0.60, 0.38, 0.09, 4.12, 0.220, 3.2),
        (5, 0.65, 0.40, 0.09, 4.15, 0.225, 3.4),
        (6, 0.70, 0.42, 0.08, 4.18, 0.230, 3.0),
        (7, 0.75, 0.44, 0.08, 4.21, 0.235, 3.2),
        (8, 0.80, 0.46, 0.08, 4.24, 0.240, 3.4),
        (9, 0.85, 0.48, 0.07, 4.27, 0.245, 3.0),
        (10, 0.90, 0.50, 0.07, 4.30, 0.250, 3.2),
        (11, 0.95, 0.52, 0.07, 4.33, 0.255, 3.4),
        (12, 1.00, 0.54, 0.06, 4.36, 0.260, 3.0),
        (13, 1.05, 0.56, 0.06, 4.39, 0.265, 3.2),
        (14, 1.10, 0.58, 0.06, 4.42, 0.270, 3.4),
        (15, 1.15, 0.60, 0.05, 4.45, 0.275, 3.0),
        (16, 1.20, 0.62, 0.05, 4.48, 0.280, 3.2),
        (17, 1.25, 0.64, 0.05, 4.51, 0.285, 3.4),
        (18, 1.30, 0.66, 0.04, 4.54, 0.290, 3.0),
        (19, 1.35, 0.68, 0.04, 4.57, 0.295, 3.2),
        (20, 1.40, 0.70, 0.04, 4.60, 0.300, 3.4),
    ]

    results = []
    for (no, si, mn, p, c, w, b) in variants:
        results.append(
            compute_variant(
                variant_no=no,
                Si_hm=si,
                Mn_hm=mn,
                P_hm=p,
                C_hm=c,
                w_scr=w,
                B=b,
            )
        )

    # Зведений вивід за допомогою PrettyTable
    from prettytable import PrettyTable

    table = PrettyTable()
    table.field_names = ["Вар", "ok", "іт", "m_steel", "Yield", "m_lime", "m_slag", "m_Fe→slag", "m_CO", "m_CO2", "denom"]
    
    # Налаштування вирівнювання (правій край для чисел)
    for field in table.field_names:
        table.align[field] = "r"
    table.align["ok"] = "c"

    for r in results:
        ok_txt = "так" if r["ok"] else "ні"
        table.add_row([
            r["variant"],
            ok_txt,
            r["iter"],
            f"{r['m_steel']:.2f}",
            f"{r['Yield']:.2f}",
            f"{r['m_lime']:.2f}",
            f"{r['m_slag']:.2f}",
            f"{r['m_Fe_to_slag']:.4f}",
            f"{r['m_CO']:.2f}",
            f"{r['m_CO2']:.2f}",
            f"{r['denom']:.6f}"
        ])

    print(table)

    # Додатково: вивести причини, якщо десь ok = ні
    bad = [r for r in results if not r["ok"]]
    if bad:
        print("\nПроблемні варіанти:")
        for r in bad:
            print(f"- Варіант {r['variant']}: {r['reason']}")


if __name__ == "__main__":
    main()
```

    | Варіант | ok | іт. | m_steel, кг | Yield, % | m_lime, кг | m_slag, кг | m_Fe→slag, кг | m_CO, кг | m_CO2, кг | denom |
    |---:|:--:|---:|---:|---:|---:|---:|---:|---:|---:|---:|
    | 1 | так | 3 | 939.94 | 93.99 | 33.11 | 54.79 | 6.3881 | 66.13 | 11.54 | 0.836000 |
    | 2 | так | 3 | 938.45 | 93.84 | 38.71 | 62.52 | 7.2892 | 66.23 | 11.56 | 0.832000 |
    | 3 | так | 3 | 938.09 | 93.81 | 36.74 | 61.28 | 7.1454 | 66.32 | 11.58 | 0.840000 |
    | 4 | так | 3 | 936.61 | 93.66 | 42.44 | 69.10 | 8.0566 | 66.41 | 11.59 | 0.836000 |
    | 5 | так | 3 | 935.08 | 93.51 | 48.55 | 77.35 | 9.0192 | 66.49 | 11.61 | 0.832000 |
    | 6 | так | 3 | 934.94 | 93.49 | 45.22 | 74.52 | 8.6885 | 66.56 | 11.62 | 0.840000 |
    | 7 | так | 3 | 933.43 | 93.34 | 51.41 | 82.84 | 9.6592 | 66.62 | 11.63 | 0.836000 |
    | 8 | так | 3 | 931.87 | 93.19 | 57.99 | 91.60 | 10.6798 | 66.68 | 11.64 | 0.832000 |
    | 9 | так | 3 | 931.94 | 93.19 | 53.36 | 87.22 | 10.1690 | 66.74 | 11.65 | 0.840000 |
    | 10 | так | 3 | 930.40 | 93.04 | 60.01 | 96.02 | 11.1960 | 66.78 | 11.66 | 0.836000 |
    | 11 | так | 3 | 928.82 | 92.88 | 67.04 | 105.25 | 12.2713 | 66.83 | 11.67 | 0.832000 |
    | 12 | так | 3 | 929.09 | 92.91 | 61.15 | 99.38 | 11.5870 | 66.86 | 11.67 | 0.840000 |
    | 13 | так | 3 | 927.53 | 92.75 | 68.24 | 108.64 | 12.6668 | 66.89 | 11.68 | 0.836000 |
    | 14 | так | 3 | 925.93 | 92.59 | 75.70 | 118.30 | 13.7936 | 66.91 | 11.68 | 0.832000 |
    | 15 | так | 3 | 926.39 | 92.64 | 68.60 | 111.00 | 12.9423 | 66.92 | 11.68 | 0.840000 |
    | 16 | так | 3 | 924.81 | 92.48 | 76.11 | 120.69 | 14.0718 | 66.93 | 11.69 | 0.836000 |
    | 17 | так | 3 | 923.19 | 92.32 | 83.96 | 130.76 | 15.2466 | 66.94 | 11.69 | 0.832000 |
    | 18 | так | 3 | 923.84 | 92.38 | 75.71 | 122.09 | 14.2352 | 66.93 | 11.68 | 0.840000 |
    | 19 | так | 3 | 922.24 | 92.22 | 83.60 | 132.17 | 15.4109 | 66.92 | 11.68 | 0.836000 |
    | 20 | так | 3 | 920.60 | 92.06 | 91.83 | 142.63 | 16.6305 | 66.91 | 11.68 | 0.832000 |
    
