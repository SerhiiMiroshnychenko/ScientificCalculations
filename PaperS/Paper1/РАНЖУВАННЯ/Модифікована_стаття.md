# Методологія агрегації рангів для оцінки значущості ознак

У контексті комплексного аналізу значущості ознак для прогнозування успішності B2B-замовлень з використанням множини
різнорідних методів постає методологічна задача інтеграції отриманих результатів. 
Прийнятий підхід ґрунтується на концепції рангового агрегування (rank aggregation), описаній у роботі Дворк та співавторів [1],
яка дозволяє узгодити результати методів, що потенційно використовують різні шкали та принципи оцінювання.
Теоретичним підґрунтям даної методики є модифікована версія класичного методу Борда, де замість сумування 
балів застосовується середнє арифметичне рангів для досягнення більш збалансованих результатів.

Для формалізації даного підходу, нехай $F=\{f_1,f_2,\ldots,f_n\}$ — множина досліджуваних ознак, 
а $M=\{m_1,m_2,\ldots,m_k\}$ — множина методів оцінки значущості,
де в даному дослідженні $k = 5$ (AUC, взаємна інформація, кореляція відстаней, логістична регресія, дерево рішень).
Кожен метод $m_j$ присвоює ознаці $f_i$ певне значення значущості $S_j(f_i)$, яке відображає ступінь впливу цієї ознаки
на цільову змінну згідно з математичним апаратом методу $m_j$. 
Для забезпечення порівнянності результатів різних методів впроваджується трансформація до рангової шкали.
Ранг ознаки $f_i$ за методом $m_j$ визначається як:

$$R_j(f_i) = |\{f_l \in F \, | \, S_j(f_l) \geq S_j(f_i)\}|$$

де $f_i$ — ознака, для якої обчислюється ранг;
$F$ — повна множина всіх досліджуваних ознак;
$f_l$ — будь-яка ознака з множини $F$, що виступає змінною при порівнянні;
$S_j(f_i)$ — значення показника значущості, яке метод $m_j$ присвоює ознаці $f_i$; $S_j(f_l) \geq S_j(f_i)$ — умова,
що значущість ознаки $f_l$ не менша за значущість ознаки $f_i$;
$\{f_l \in F \, | \, S_j(f_l) \geq S_j(f_i)\}$ — множина всіх ознак, значущість яких не менша за значущість ознаки $f_i$; 
$|\cdot|$ — потужність множини, тобто кількість елементів, які відповідають умові $S_j(f_l) \geq S_j(f_i)$.

На відміну від класичного методу Борда, який для множини елементів $S = \{s_1, s_2, \ldots, s_n\}$ та $k$
різних ранжувань $\tau_1, \tau_2, \ldots, \tau_k$ надає кожному елементу $s_i$ бал
$$B(s_i) = \sum_{j=1}^{k} (n - \tau_j(s_i) + 1)$$,
де $\tau_j(s_i)$ — позиція елемента $s_i$ у ранжуванні $\tau_j$, $n$ - загальна кількість елементів, $k$ - кількість різних ранжувань (методів оцінки).
у нашій модифікації застосовується середнє арифметичне рангів:

$$\bar{R}(f_i) = \frac{1}{k}\sum_{j=1}^{k}{R_j(f_i)}$$

Цей інтегральний показник $\bar{R}(f_i)$ виступає узагальненою мірою значущості ознаки $f_i$,
враховуючи результати всіх задіяних методів аналізу. Менше значення $\bar{R}(f_i)$ свідчить про вищу консолідовану значущість ознаки.

Запропонована модифікація методу Борда надає суттєві переваги.
По-перше, середнє арифметичне рангів є більш стійким до викидів та екстремальних оцінок окремими методами,
що особливо важливо при аналізі ознак різної природи. По-друге, вона забезпечує інваріантність щодо шкал вимірювання, 
оскільки рангове перетворення усуває проблему неспівставності шкал різних методів.
По-третє, така модифікація гарантує методологічну нейтральність, надаючи рівну вагу всім методам оцінювання.
По-четверте, отримане ранжування є інтуїтивно зрозумілим та легко інтерпретованим, оскільки середній ранг безпосередньо
вказує на усереднену позицію ознаки за всіма методами оцінювання.

В імплементаційному аспекті обчислення середнього рангу реалізовано через послідовність взаємопов'язаних етапів.
Спочатку для кожного методу оцінки значущості формується впорядкований список ознак на основі відповідних показників значущості.
Далі кожній ознаці присвоюється ранг відповідно до її позиції у впорядкованому списку за формулою, наведеною вище.
Наступним кроком для кожної ознаки обчислюється середнє арифметичне її рангів за всіма методами. 
Завершальною стадією є впорядкування ознак за зростанням середнього рангу, що формує консолідований список значущості.

Емпіричні результати демонструють, що такий підхід дозволяє ефективно виявляти найбільш значущі ознаки для прогнозування успішності B2B-замовлень, створюючи надійну основу для подальшого аналізу та моделювання.

## Джерела

[1] Dwork, C., Kumar, R., Naor, M., Sivakumar, D. (2001). Rank aggregation methods for the Web. In Proceedings of the 10th International Conference on World Wide Web (WWW '01), 613-622.
