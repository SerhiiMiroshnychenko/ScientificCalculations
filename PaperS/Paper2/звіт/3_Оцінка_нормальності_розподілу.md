# 3. Методи оцінки нормальності розподілу даних

Коректний вибір методу статистичного аналізу значною мірою залежить від характеру розподілу досліджуваних даних. Параметричні методи, що базуються на припущенні про нормальний розподіл, забезпечують високу статистичну потужність за умови дотримання цього припущення, але можуть давати некоректні результати при його порушенні. З огляду на це, оцінка нормальності розподілу є критично важливим етапом статистичного аналізу, що передує вибору відповідного методу порівняння груп.

У запропонованій системі прогнозування успішності замовлень використовується комплексний підхід до оцінки нормальності, що базується на застосуванні кількох різних методів тестування нормальності розподілу. Такий підхід підвищує надійність висновків і дозволяє уникнути упереджень, притаманних окремим тестам.

Розглянемо детально основні методи оцінки нормальності розподілу, що використовуються у системі.

### Тест Шапіро-Вілка

Тест Шапіро-Вілка є одним із найпотужніших тестів на нормальність, особливо ефективний для малих і середніх вибірок (до 5000 спостережень). Статистика тесту Шапіро-Вілка визначається за формулою:

$$W = \frac{\left( \sum_{i=1}^{n} a_i x_{(i)} \right)^2}{\sum_{i=1}^{n} (x_i - \bar{x})^2}$$

де $x_{(i)}$ — елементи вибірки, впорядковані за зростанням, $\bar{x}$ — середнє арифметичне вибірки, а $a_i$ — коефіцієнти, що обчислюються на основі математичних очікувань порядкових статистик незалежних випадкових величин з нормального розподілу.

Значення $W$ близькі до 1 вказують на відповідність розподілу даних нормальному розподілу. P-значення тесту обчислюється на основі статистики $W$ і показує ймовірність отримання такого або більш екстремального значення за умови, що дані походять з нормального розподілу.

У системі прогнозування тест Шапіро-Вілка застосовується з обмеженням на розмір вибірки. Для вибірок більше 5000 спостережень використовується випадкова підвибірка з 5000 елементів, щоб уникнути зниження потужності тесту при великих обсягах даних.

### Тест Д'Агостіно-Пірсона

Тест Д'Агостіно-Пірсона (також відомий як тест омнібус) базується на оцінці асиметрії та ексцесу розподілу. Він обчислює статистику $K^2$, що є сумою квадратів z-оцінок для асиметрії та ексцесу:

$$K^2 = Z_1^2 + Z_2^2$$

де $Z_1$ — z-оцінка для коефіцієнта асиметрії, а $Z_2$ — z-оцінка для коефіцієнта ексцесу. 

При нормальному розподілі статистика $K^2$ підпорядковується розподілу хі-квадрат з двома ступенями свободи. P-значення обчислюється як ймовірність перевищення отриманого значення $K^2$ за умови істинності нульової гіпотези про нормальність розподілу.

Цей тест особливо чутливий до відхилень від нормальності у формі розподілу (асиметрія, видовженість або сплющеність), але вимагає достатньо великої вибірки (не менше 20 спостережень) для надійних результатів. У системі прогнозування тест Д'Агостіно-Пірсона застосовується лише для вибірок, що задовольняють цій вимозі.

### Тест Андерсона-Дарлінга

Тест Андерсона-Дарлінга є модифікацією критерію Колмогорова-Смирнова, що надає більшої ваги хвостам розподілу. Статистика тесту обчислюється за формулою:

$$A^2 = -n - \frac{1}{n} \sum_{i=1}^{n} (2i - 1) \cdot [\ln(F(Y_i)) + \ln(1 - F(Y_{n+1-i}))]$$

де $F$ — кумулятивна функція розподілу для стандартного нормального розподілу, а $Y_i$ — нормалізовані впорядковані за зростанням значення вибірки.

Тест Андерсона-Дарлінга є особливо чутливим до відхилень від нормальності в хвостах розподілу і забезпечує хорошу потужність для широкого діапазону розмірів вибірок. У системі прогнозування даний тест доповнює тести Шапіро-Вілка та Д'Агостіно-Пірсона, забезпечуючи комплексну оцінку нормальності.

### Комплексний підхід до оцінки нормальності

У запропонованій системі прогнозування використовується інноваційний підхід до оцінки нормальності, що поєднує результати трьох вищезазначених тестів. Замість покладатися на результати окремого тесту, система проводить голосування: розподіл вважається нормальним, якщо принаймні два з трьох тестів підтверджують нормальність (відповідне p-значення перевищує встановлений рівень значущості α = 0.05).

Такий комплексний підхід дозволяє підвищити надійність висновків щодо нормальності розподілу та зменшити ризик як помилково відхилити нормальний розподіл (помилка першого роду), так і помилково прийняти ненормальний розподіл за нормальний (помилка другого роду).

Для кожної числової ознаки оцінка нормальності проводиться окремо для групи успішних та групи неуспішних замовлень. На основі результатів оцінки нормальності приймається рішення щодо використання параметричних (якщо обидві групи мають нормальний розподіл) або непараметричних (в інших випадках) методів для подальшого порівняння груп та визначення статистичної значущості ознаки для прогнозування успішності замовлень.

Подібний адаптивний підхід до вибору методу статистичного аналізу дозволяє максимізувати статистичну потужність тестів при збереженні їхньої валідності, що є критично важливим для побудови надійної прогностичної моделі.
