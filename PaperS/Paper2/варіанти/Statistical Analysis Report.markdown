# Аналіз впливу різних факторів на успішність замовлень: Статистичне дослідження

## Вступ

Успішність замовлень є ключовим показником ефективності для бізнесів у сфері послуг та роздрібної торгівлі. Виявлення факторів, що впливають на цей показник, дозволяє оптимізувати бізнес-процеси та покращувати якість обслуговування клієнтів. У цьому дослідженні проведено статистичний аналіз даних про замовлення з метою визначення основних факторів, що впливають на їхню успішність, та розробки моделі для прогнозування ймовірності успіху. Дослідження базується на даних, отриманих із файлу `cleanest_data.csv`, та включає статистичний аналіз і побудову прогнозної моделі.

## Методологія

Дослідження розпочалося зі збору даних із файлу `cleanest_data.csv`, який містив 86794 записи та 25 колонок. Цільова змінна `is_successful` визначала успішність замовлення: 1 означало успішне замовлення, 0 – неуспішне. Аналіз розподілу цільової змінної показав, що 63.10% замовлень були успішними, а 36.90% – неуспішними. З 25 колонок було відібрано 19 числових для подальшого аналізу. У колонці `order_amount` виявлено та замінено три від’ємні значення на нулі для забезпечення коректності даних.

Дані розділено на тренувальну вибірку (70%, 60755 записів) та тестову вибірку (30%, 26039 записів) із параметрами `test_size=0.3` та `random_state=42`. Розподіл цільової змінної в обох вибірках залишився збалансованим: у тренувальній вибірці 36.90% неуспішних та 63.10% успішних замовлень, у тестовій – 36.91% неуспішних та 63.09% успішних.

Для оцінки статистичної значущості числових колонок використано непараметричний тест Mann-Whitney U, оскільки тести нормальності (Шапіро-Вілка, Д’Агостіно-Пірсона та Андерсона-Дарлінга) показали ненормальний розподіл даних у групах. Додатково обчислено AUC як міру розміру ефекту. На основі результатів відібрано 17 статистично значущих колонок, для кожної з яких визначено порогове значення, напрямок впливу та вагу фактора, що базується на AUC.

Прогнозна модель побудована шляхом обчислення зваженої суми голосів для кожного спостереження. Голосування визначалося залежно від того, чи перевищує значення колонки порогове значення у напрямку, що сприяє успіху. Модель протестовано на тестовій вибірці з оцінкою її якості за низкою метрик.

## Результати

Аналіз виявив 17 статистично значущих факторів, що впливають на успішність замовлень. Найвпливовішими виявилися кількість повідомлень у замовленні (`order_messages`), відсоток успішних замовлень партнера (`partner_success_rate`) та кількість змін у замовленні (`order_changes`). Таблиця нижче узагальнює ці фактори, їхні порогові значення, напрямки впливу та ваги.

| Колонка                        | Поріг     | Напрямок впливу    | Вага фактора |
|--------------------------------|-----------|--------------------|--------------|
| order_messages                 | 7.00      | більше → успіх     | 0.5420       |
| partner_success_rate           | 62.10     | більше → успіх     | 0.3956       |
| order_changes                  | 2.50      | більше → успіх     | 0.2830       |
| partner_total_messages         | 224.50    | більше → успіх     | 0.1866       |
| partner_total_orders           | 24.50     | більше → успіх     | 0.1786       |
| order_lines_count              | 2.50      | більше → успіх     | 0.1662       |
| partner_order_age_days         | 736.00    | більше → успіх     | 0.1564       |
| partner_avg_changes            | 3.89      | більше → успіх     | 0.1436       |
| partner_success_avg_amount     | 904.14    | більше → успіх     | 0.1304       |
| order_amount                   | 512.88    | більше → успіх     | 0.1135       |
| partner_fail_avg_messages      | 5.62      | більше → успіх     | 0.0875       |
| partner_success_avg_changes    | 4.29      | більше → успіх     | 0.0855       |
| partner_fail_avg_changes       | 2.93      | більше → успіх     | 0.0781       |
| hour_of_day                    | 11.00     | менше → успіх      | 0.0767       |
| partner_success_avg_messages   | 9.44      | більше → успіх     | 0.0643       |
| partner_avg_amount             | 1127.29   | менше → успіх      | 0.0357       |
| quarter                        | 2.50      | більше → успіх     | 0.0182       |

Модель прогнозування, застосована до тестової вибірки, продемонструвала такі метрики якості: точність (Accuracy) – 0.6555, збалансована точність (Balanced Accuracy) – 0.6578, точність для класу 1 (Precision) – 0.7690, повнота (Recall) – 0.6489, специфічність (Specificity) – 0.6667, F1-міра – 0.7039, ROC AUC – 0.7222, негативна прогнозна цінність (Negative Predictive Value) – 0.5262. Матриця помилок наведена в таблиці нижче.

|                | Прогноз: 0 | Прогноз: 1 |
|----------------|------------|------------|
| Фактично: 0    | 6407       | 3203       |
| Фактично: 1    | 5768       | 10661      |

## Обговорення

Результати свідчать про помірну ефективність моделі у прогнозуванні успішності замовлень. Висока точність (Precision) у 76.90% для успішних замовлень вказує на здатність моделі правильно ідентифікувати більшість позитивних випадків. Однак повнота (Recall) у 64.89% свідчить про те, що частина успішних замовлень залишається невиявленою. Збалансована точність (65.78%) та специфічність (66.67%) підкреслюють адекватну здатність моделі розрізняти обидва класи.

Серед факторів найбільший вплив мають `order_messages` (вага 0.5420), `partner_success_rate` (вага 0.3956) та `order_changes` (вага 0.2830). Більша кількість повідомлень і змін у замовленні, а також високий відсоток успішності партнера позитивно корелюють із ймовірністю успіху. Цікавим є вплив часу замовлення (`hour_of_day`), де значення до 11 години асоціюються з вищою ймовірністю успіху.

## Висновки

Дослідження дозволило ідентифікувати ключові фактори, що впливають на успішність замовлень, та розробити модель із прийнятною точністю для їх прогнозування. Отримані результати можуть бути використані для виявлення замовлень із високим ризиком невдачі, що сприятиме оптимізації бізнес-процесів. Подальші дослідження можуть включати аналіз додаткових змінних, таких як демографічні характеристики клієнтів, а також застосування складніших методів машинного навчання для підвищення точності прогнозів.